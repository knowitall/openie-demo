@(group: Answer, debug: Boolean, index: Int)

@import helper.twitterBootstrap._
@import models.OpenIETriple
<div class="panel-group" id="accordion-@index">
@for((d, ppindex) <- group.dgroups.zipWithIndex) {
  <div class="panel panel-default">
  <a class="list-group-item accordion-toggle" data-toggle="collapse" data-parent="#accordion-@index" href="#collapse-@index-@ppindex">
  
  
  <div class="panel-title">
    
    <h3>@{d.resultsCount + " results from \"" + d.paraphrases.head.target + "\""}</h3>
    
  </div>
  
  </a>
  <div id="collapse-@index-@ppindex" class="panel-collapse collapse @{if (ppindex==0) {"in"} else {""}}">
  <li class="list-group-item">
  
  @for((query, triples) <- d.queryTriples) {
    <ul class="list-group">
    <li class="list-group-item panel-title">
    @{"Evidence for: " + query}
    </li>
    <li class="list-group-item">
    @for(r <- triples) {
    
      
      @if(!r.isInstanceOf[OpenIETriple]) {
        <div class="sentence">
        <a class="sent">
        <b>@r.arg1</b>@{", " + r.rel + ", "}<b>@r.arg2</b>
        </a>
        <span style="color: #888">
        @{"via "}
        <a href="@r.url">@r.source</a>
        </span>
      } else {
        @defining(r.asInstanceOf[OpenIETriple]) { t =>
          <div class="sentence">
          <a class="sent" href="@t.url">
          @for((string, i) <- t.sentenceStrings.zipWithIndex) {
            @if(t.boldIntervals.exists(_.start==i)) {<b>}
            @if(t.boldIntervals.exists(_.end==i)) {</b>}
            @string.replaceAll("\t", " ").replaceAll("[\\p{C}]","") 
          }
          @if(t.boldIntervals.exists(_.end==t.sentenceStrings.size)) {</b>}
          <span style="color: #888">@{
            if (t.corpus == "cw") {" (via ClueWeb12)"}
            else if (t.corpus == "g1b") {" (via Google)"}
            else if (t.corpus == "wiki") {" (via Wikipedia)"}
            else if (t.corpus == "news") {" (via News)"}
            else {" (via %s)" format t.corpus}
          }</span>
          </a>
          <div class="hover-source">
          From Open IE 4 (
          @{t.corpus match {
              case "cw" => { "ClueWeb12" }
              case "g1b" => { "Google" }
              case "wiki" => {"Wikipedia"}
              case "news" => {"News"}
              case _ => { t.corpus }
            }  
          } <!--- t.corpus --->
          corpus. Source: @{t.url})
          </div> <!--- hover source --->
          </div> <!--- sentence --->
        } <!-- defining -->
      } <!-- if not open ie, else, ... -->
      
    }  <!--- triple --->
    </li>
    </ul>
  }  <!-- query --->
    
  </li>  
  </div>
  </div>
}  <!-- paraphrases --->
</div>