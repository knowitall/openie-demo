@(title: GroupTitle, debug: Boolean)

@Html(title.parts.map(part=>part.entity match {
  case Some(entity) => 
    <span id={entity.fbid} class="title-entity" rel="popover" title={part.text} data-content={
      "<div><span class='uri-title'>URI:</span> <blockquote class='uri-body'>http://www.freebase.com/view/m/"+entity.fbid+"</blockquote></div>" +
      "<div><span class='types-title'>Types:</span>" + (if(part.types.size == 0) " <span class='types-body'>None</span><blockquote></blockquote>" else "<blockquote class='types-body'>"+part.types.toSeq.sortBy(_.name).iterator.map(_.name).mkString("<br/>")+"</blockquote></div>") +
      "<div><span class='syns-title'>Extracted Synonyms:</span><blockquote class='syns-body'>"+part.synonyms.mkString("<br/>")+"</blockquote></div>"
    }>{if (debug) entity.toString else entity.name}</span>
  case None => <span class="title-string" rel="popover" title={part.text} data-content={part.synonyms.mkString("<br/>")}>{part.lemma}</span>
}).mkString(title.connector))
