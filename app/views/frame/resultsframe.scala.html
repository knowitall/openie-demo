@(searchForm: Form[Query], query: Query, message: Option[String], answers: AnswerSet, totalAnswerCount: Int, totalSentenceCount: Int)(content: Html)

@import helper.twitterBootstrap._

@helper.main("Open Information Extraction", compact=true) {
  @helper.form(action = routes.Application.submit(false), 'class -> "well form-inline hidden-phone") {
    <div class="results-form">
      <label for="arg1">Argument 1:</label>
      <span class="input">
          <input type="text" id="arg1" name="arg1" value="@query.arg1" >
          <span class="help-inline"></span>
      </span>
    </div>

    <div class="results-form">
      <label for="rel">Relation:</label>
      <span class="input">
          <input type="text" id="rel" name="rel" value="@query.rel" >
          <span class="help-inline"></span>
      </span>
    </div>

    <div class="results-form">
      <label for="arg2">Argument 2:</label>
      <span class="input">
          <input type="text" id="arg2" name="arg2" value="@query.arg2" >
          <span class="help-inline"></span>
      </span>
    </div>

    <div class="results-form">
      <span class="input">
          <select id="corpora" name="corpora">
              <option value="">All</option>
            @for(Corpus(displayName, indexName) <- Corpus.corpora) {
              <option value="@indexName" @if(query.corpora.map(_.corpora) == Some(indexName)){SELECTED}>@displayName</option>
            }
          </select>
          <span class="help-inline"></span>
      </span>
    </div>

    <button class="btn"><i class="icon-search"></i> Search</button>
  }

  <div class="row">
    <!-- if the query is a linked entity, insert a knowledge card about it -->
    @{answers.queryEntities.headOption filter {case(e, n) => n > 2} match {
        case Some((fbEntity,count)) => Html("<div id='query-card' class='offset1 span10' data-attr='"+fbEntity.fbid+"'><h3>"+fbEntity.name+"</h3><div id='query-card-spinner'></div></div>")
        case None => ""
      }
    }
  </div>

    <div id="stats"><b>@totalAnswerCount answers</b> from <b>@totalSentenceCount sentences</b>@message.map(" ("+_+")").getOrElse("")</div>
    
  <div id="results-content">
    @content
  </div>

  <script type="text/javascript">
    function tabto(dest) {
      $.ajax(dest).done(function(html) { 
        $('#results-content').html(html);
      })
    }
  </script>
}
