@(searchForm: Form[Query], query: Query, answers: AnswerSet, pageno: Int, pageCount: Int, maxSentenceCount: Int)

@import helper.twitterBootstrap._
@import edu.washington.cs.knowitall.browser.extraction.ExtractionGroup

@helper.main("UW Open Information Extraction") {
  <style>
    .hid { display: none }
    .title-entity { font-weight: bold }
    .answer { font-size: large }
  </style>
  
  @helper.form(action = routes.Application.submit, 'class -> "well form-inline") {
      <label for="arg1">Argument 1:</label>
      <span class="input">
          <input type="text" id="arg1" name="arg1" value="@query.arg1" >
          <span class="help-inline"></span>
      </span>
      <label for="rel">Relation:</label>
      <span class="input">
          <input type="text" id="rel" name="rel" value="@query.rel" >
          <span class="help-inline"></span>
      </span>
      <label for="arg2">Argument 2:</label>
      <span class="input">
          <input type="text" id="arg2" name="arg2" value="@query.arg2" >
          <span class="help-inline"></span>
      </span>
      <button class="btn primary"><i class="icon-search"></i> Search</button>
  }
  
  <div id="stats"><b>@answers.answerCount answers</b> from <b>@answers.sentenceCount sentences</b></div>


<!--
  <b>Types:</b> 
  <div class="btn-group" data-toggle="buttons-checkbox">
      <button class="btn">Chemicsals</button>
      <button class="btn">Products</button>
      <button class="btn">Elements</button>
      <button class="btn">Other</button>
  </div>
-->

  <div style="height: 25px"></div>

  <div class="tabbable tabs-left">
    <ul class="nav nav-tabs">
      @for((g, i) <- answers.groups.zipWithIndex) {
      <li><a href="#L@{i}" class="answer" data-toggle="tab">@helper.grouptitle(g.title) (@g.contents.size)</a></li>
      }
    </ul>
    <div class="tab-content">
      @for((g, i) <- answers.groups.zipWithIndex) {
      <div class="tab-pane" id="L@{i}">
        @helper.sentences(g.copy(contents=g.contents.take(maxSentenceCount)))
        @if(g.contents.size > maxSentenceCount) {
          <p style="text-align: center"><a href="@{routes.Application.sentences(query.arg1, query.rel, query.arg2, g.title.text)}">Show all sentences (@{g.contents.size - maxSentenceCount} more)</a></p>
        }
      </div>
      }
    </div>
  </div> <!-- /tabbable -->
    <!-- Pagination -->
    <div class="pagination" align="center">
        <ul>
@if(pageno > 0) {
            <li><a href="@{routes.Application.search(query.arg1, query.rel, query.arg2, pageno - 1)}">Prev</a></li>
}
@for(i <- pageno-4 to pageno-1; if i >= 0) {
            <li><a href="@{routes.Application.search(query.arg1, query.rel, query.arg2, i)}">@i</a></li>
}
            <li class="active">
            <a href="#">@pageno</a>
            </li>
@for(i <- pageno+1 to pageno+4; if i < pageCount) {
            <li><a href="@{routes.Application.search(query.arg1, query.rel, query.arg2, i)}">@i</a></li>
}
@if(pageno + 1 < pageCount) {
            <li><a href="@{routes.Application.search(query.arg1, query.rel, query.arg2, pageno + 1)}">Next</a></li>
}
        </ul>
    </div>
  
    <script type="text/javascript">
      $('[rel=popover]').popover({ delay: { show: 500, hide: 100 }})
    </script>
}
